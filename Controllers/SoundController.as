package Controllers {	import flash.events.Event;	import flash.media.Sound;	import flash.media.SoundChannel;	import flash.utils.getDefinitionByName;		public class SoundController {		public static var gameMusic:Sound;		//background music blueprint that is currently playing		public static var startTime:int;		//amount of milliseconds from the start of the track that gameMusic begins playing		public static var endTime:int;		//amount of milliseconds from the start of the track that gameMusic plays again		public static var loopLength:int;		//length of the loop; milliseconds the track jumps back to loop				public static var gameMusicChannel:SoundChannel;		//actual background music that is currently playing				public function SoundController() {			// constructor code		}				public static function startMusic(musicType:String){			var musicClass:Class = getDefinitionByName(musicType) as Class;			gameMusic = new musicClass();						if(musicType == "BGMSadForest"){ //Forest Music				startTime = 0;				endTime = 47000;				loopLength = 41000;			}						if(musicType == "BGMSpookyCave"){ //Cave Music				startTime = 0;				endTime = 52000;				loopLength = 52000;			}						gameMusicChannel = gameMusic.play(startTime);			//play new music from start time			Main.stage.addEventListener(Event.ENTER_FRAME, loopMusic);			//ENTER_FRAME function loops sound properly		}				public static function changeMusic(musicType:String){			gameMusicChannel.stop();			//stop old music that had been playing						startMusic(musicType);			//start playing new music		}		public static function loopMusic(event:Event):void{			var finalPos:int = gameMusicChannel.position;			if(finalPos >= endTime){				gameMusicChannel.stop();				gameMusicChannel = gameMusic.play(finalPos - loopLength);			}		}	}	}